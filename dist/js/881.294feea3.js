"use strict";(self["webpackChunkmy_vshop"]=self["webpackChunkmy_vshop"]||[]).push([[881],{5784:function(t,i,a){a.d(i,{Z:function(){return y}});var s=a(3396),n=a(7139),e=a(9242);const o={class:"wrapper"},c={class:"card"},l={class:"bottom"},r={class:"left"},p={class:"details"},u=["onClick"],g=(0,s._)("i",{class:"bi bi-cart-plus"},null,-1),d=[g],h={class:"inside",id:"inside"},_=(0,s._)("div",{class:"icon"},[(0,s._)("i",{class:"bi bi-bookmark-star"})],-1),v={class:"insidecontents"},f=(0,s._)("button",{class:"btn btn-sm btn-frame w-50",type:"button"},[(0,s._)("span",null,"詳細資訊")],-1);function k(t,i,a,g,k,m){const b=(0,s.up)("Loading"),w=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(b,{active:k.isLoading},null,8,["active"]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.products,(i=>((0,s.wg)(),(0,s.iD)("li",{class:"col-md-4 col-lg3 border-0 d-flex justify-content-center",key:i.id},[(0,s._)("div",o,[(0,s._)("div",c,[(0,s._)("div",{class:"top",style:(0,n.j5)({backgroundImage:"url("+i.imageUrl+")"})},null,4),(0,s._)("div",l,[(0,s._)("div",r,[(0,s._)("div",p,[(0,s._)("h5",null,(0,n.zw)(i.title),1),(0,s._)("p",null,"NT$ "+(0,n.zw)(t.$filters.currency(i.price)),1)]),(0,s._)("button",{type:"button",class:"btn buy",onClick:(0,e.iM)((t=>m.addToCart(i.id)),["stop"])},d,8,u)])])]),(0,s._)("div",h,[_,(0,s._)("div",v,[(0,s.Wm)(w,{to:`/user/product/${i.id}`},{default:(0,s.w5)((()=>[f])),_:2},1032,["to"])])])])])))),128))],64)}var m={data(){return{isLoading:!1,loadingStatus:{}}},props:["products"],methods:{addToCart(t){const i="https://vue3-course-api.hexschool.io/api/linbcshop-api/cart",a={product_id:t,qty:1};this.loadingStatus.loadingCart=t,this.isLoading=!0,this.$http.post(i,{data:a}).then((i=>{i.data.success&&(this.pushMessageState(i,"加入購物車"),this.emitter.emit("update-cart",t),this.isLoading=!1)})).catch((t=>{this.pushMessageState(t,"連線錯誤"),this.isLoading=!1}))}},inject:["emitter","pushMessageState"]},b=a(89);const w=(0,b.Z)(m,[["render",k]]);var y=w},9263:function(t,i,a){a.d(i,{Z:function(){return m}});var s=a(3396),n=a(9242),e=a(7139);const o={key:0},c={class:"pagination justify-content-center text-center"},l={key:0,class:"page-item"},r=(0,s._)("span",null,"«",-1),p=[r],u=["onClick"],g={key:1,class:"page-item"},d=(0,s._)("span",null,"»",-1),h=[d];function _(t,i,a,r,d,_){return a.pagination.total_pages>1?((0,s.wg)(),(0,s.iD)("nav",o,[(0,s._)("ul",c,[a.pagination.has_pre?((0,s.wg)(),(0,s.iD)("li",l,[(0,s._)("a",{class:"page-link",href:"#",onClick:i[0]||(i[0]=(0,n.iM)((t=>_.changePage(a.pagination.current_page-1)),["prevent"]))},p)])):(0,s.kq)("",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.pagination.total_pages,(t=>((0,s.wg)(),(0,s.iD)("li",{key:t,class:(0,e.C_)(["page-item",{active:a.pagination.current_page===t}])},[(0,s._)("a",{class:"page-link",href:"#",onClick:(0,n.iM)((i=>_.changePage(t)),["prevent"])},(0,e.zw)(t),9,u)],2)))),128)),a.pagination.has_next?((0,s.wg)(),(0,s.iD)("li",g,[(0,s._)("a",{class:"page-link",href:"#",onClick:i[1]||(i[1]=(0,n.iM)((t=>_.changePage(a.pagination.current_page+1)),["prevent"]))},h)])):(0,s.kq)("",!0)])])):(0,s.kq)("",!0)}var v={props:["pagination"],emits:["change-page"],methods:{changePage(t){this.$emit("change-page",t)}}},f=a(89);const k=(0,f.Z)(v,[["render",_]]);var m=k},9881:function(t,i,a){a.r(i),a.d(i,{default:function(){return w}});var s=a(3396),n=a(7139),e=a(9242);const o={class:"viewbody"},c={class:"mt-5"},l={class:"container pb-5"},r={class:"row pt-5"},p={class:"col-lg-3 mb-3"},u={class:"list-group sticky-top sticky-position"},g=["onClick"],d={class:"col-lg-9"},h={class:"row"};function _(t,i,a,_,v,f){const k=(0,s.up)("Loading"),m=(0,s.up)("Card"),b=(0,s.up)("PaginationModal");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(k,{active:v.isLoading},null,8,["active"]),(0,s._)("div",o,[(0,s._)("div",c,[(0,s._)("div",l,[(0,s._)("div",r,[(0,s._)("div",p,[(0,s._)("ul",u,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(v.filter.list,((t,i)=>((0,s.wg)(),(0,s.iD)("li",{key:i},[(0,s._)("a",{href:"#",class:(0,n.C_)(["list-group-item",{active:this.filter.str===t}]),onClick:(0,e.iM)((i=>f.changeCategory(t)),["prevent"])},(0,n.zw)(t),11,g)])))),128))])]),(0,s._)("div",d,[(0,s._)("ul",h,[(0,s.Wm)(m,{products:v.products},null,8,["products"])])])])])]),(0,s.Wm)(b,{pagination:v.pagination,onChangePage:f.getProducts},null,8,["pagination","onChangePage"])])],64)}var v=a(9263),f=a(5784),k={data(){return{products:[],pagination:"",loadingStatus:{},isLoading:!1,filter:{list:["全部商品","高山茶","綠茶","紅茶","青茶","黑茶","組合包"],str:"全部商品"}}},components:{PaginationModal:v.Z,Card:f.Z},methods:{getProducts(t=1){const i=`https://vue3-course-api.hexschool.io/api/linbcshop-api/products/?page=${t}`,a="https://vue3-course-api.hexschool.io/api/linbcshop-api/products/all";this.isLoading=!0,this.$http.get(i).then((t=>{if(!t.data.success)return this.pushMessageState(t,"取得全部產品資料"),void(this.isLoading=!1);"全部商品"!==this.filter.str?this.$http.get(a).then((t=>{const i=t.data.products.filter((t=>t.category===this.filter.str));this.products=i,this.pagination=""})):(this.products=t.data.products,this.pagination=t.data.pagination),this.isLoading=!1}))},changeCategory(t){this.filter.str=t,this.getProducts()}},created(){this.getProducts()},inject:["pushMessageState"]},m=a(89);const b=(0,m.Z)(k,[["render",_]]);var w=b}}]);
//# sourceMappingURL=881.294feea3.js.map