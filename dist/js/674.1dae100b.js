"use strict";(self["webpackChunkmy_vshop"]=self["webpackChunkmy_vshop"]||[]).push([[674],{9963:function(t,s,l){l.r(s),l.d(s,{default:function(){return es}});var e=l(3396),i=l(9242),a=l(7139);const o={class:"viewbody"},c=(0,e.uE)('<div class="container mb-5 py-5 px-md-4 mt-5"><div class="row justify-content-center mt-5"><div class="col-md-10 mx-auto"><ol class="row progress-bar list-unstyled justify-content-between text-center"><li class="col-3 active">購物車</li><li class="col-3">填寫資料</li><li class="col-3">確認訂單</li><li class="col-3">完成</li></ol></div></div></div>',1),n={key:0,class:"p-5 text-center"},d=(0,e._)("p",{class:"fs-4 opacity-50 mt-5"},[(0,e._)("i",{class:"bi bi-cart-x-fill"}),(0,e._)("br"),(0,e.Uk)(" 購物車目前沒任何商品喔！ ")],-1),r=(0,e._)("i",{class:"bi bi-arrow-right"},null,-1),u=(0,e.Uk)(" 去逛逛 "),p={key:1,class:"cart"},h={class:"container bg-white mb-5 py-5 px-md-4"},m={class:"row justify-content-evenly px-3 px-md-5"},b={class:"col-lg-6"},_={class:"flex-column list-unstyled mx-3 mx-md-4 mb-5"},g={class:"col-12 col-md-6 col-lg-8"},y={class:"mb-2"},w=(0,e._)("h2",null,"付款方式",-1),v={for:"card",class:"me-3"},f=(0,e.Uk)("刷卡 "),k={for:"transfer",class:"m-3"},C=(0,e.Uk)(" 轉帳 "),x={for:"cash",class:"m-3"},q=(0,e.Uk)(" 貨到付款 "),D={class:"col-12 col-md-6 col-lg-8"},U={class:"mb-2"},L=(0,e._)("h2",null,"收貨方式",-1),$={for:"delivery",class:"me-3"},I=(0,e.Uk)("宅配 "),j={for:"inStore",class:"m-3"},z=(0,e.Uk)(" 超商取貨 "),T={class:"col-lg-6"},V={class:"row flex-column align-items-end mx-3 mx-md-4 mb-5"},N={class:"col-12 col-md-6 col-lg-8"},S={key:0,class:"text-success"},P={class:"input-group mb-2"},W={key:0,class:"spinner-border spinner-border-sm",role:"status"},G={key:1},M={class:"col-12 col-md-6 col-lg-8 d-flex justify-content-between"},H=(0,e._)("p",null,"商品",-1),Y={class:"col-12 col-md-6 col-lg-8 d-flex justify-content-between"},E=(0,e._)("p",null,"小計",-1),K={class:"col-12 col-md-6 col-lg-8 border-bottom d-flex justify-content-between mb-2"},Z=(0,e._)("p",null,"折扣",-1),R={class:"col-12 col-md-6 col-lg-8 d-flex justify-content-between"},A=(0,e._)("h4",{class:"fw-bold fs-6 mb-0"},"應付金額",-1),B={class:"container mb-5 py-5 px-md-4"},F={class:"row"},J={class:"col-5 col-md-3 col-lg-2 ms-md-4 me-auto"},O=(0,e._)("i",{class:"bi bi-arrow-left"},null,-1),Q=(0,e.Uk)(" 還想逛逛 "),X={class:"col-5 col-md-3 col-lg-2 ms-md-4 ms-auto"},tt=(0,e.Uk)(" 我要結帳 "),st=(0,e._)("i",{class:"bi bi-arrow-right"},null,-1),lt=[tt,st];function et(t,s,l,tt,st,et){const it=(0,e.up)("Loading"),at=(0,e.up)("RouterLink"),ot=(0,e.up)("Cart");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.Wm)(it,{active:st.isLoading},null,8,["active"]),(0,e._)("div",o,[c,st.cart?.carts?.length?((0,e.wg)(),(0,e.iD)("div",p,[(0,e.Wm)(ot,{cart:st.cart,subtotal:st.subtotal},null,8,["cart","subtotal"]),(0,e._)("div",h,[(0,e._)("div",m,[(0,e._)("div",b,[(0,e._)("ul",_,[(0,e._)("li",g,[(0,e._)("div",y,[w,(0,e._)("label",v,[(0,e.wy)((0,e._)("input",{id:"card",type:"radio",name:"刷卡",value:"刷卡","onUpdate:modelValue":s[0]||(s[0]=t=>st.pay=t)},null,512),[[i.G2,st.pay]]),f]),(0,e._)("label",k,[(0,e.wy)((0,e._)("input",{id:"transfer",type:"radio",name:"轉帳",value:"轉帳","onUpdate:modelValue":s[1]||(s[1]=t=>st.pay=t)},null,512),[[i.G2,st.pay]]),C]),(0,e._)("label",x,[(0,e.wy)((0,e._)("input",{id:"cash",type:"radio",name:"貨到付款",value:"貨到付款","onUpdate:modelValue":s[2]||(s[2]=t=>st.pay=t)},null,512),[[i.G2,st.pay]]),q])])]),(0,e._)("li",D,[(0,e._)("div",U,[L,(0,e._)("label",$,[(0,e.wy)((0,e._)("input",{id:"delivery",type:"radio",name:"宅配",value:"宅配","onUpdate:modelValue":s[3]||(s[3]=t=>st.shipping=t)},null,512),[[i.G2,st.shipping]]),I]),(0,e._)("label",j,[(0,e.wy)((0,e._)("input",{id:"inStore",type:"radio",name:"超商取貨",value:"超商取貨","onUpdate:modelValue":s[4]||(s[4]=t=>st.shipping=t)},null,512),[[i.G2,st.shipping]]),z])])])])]),(0,e._)("div",T,[(0,e._)("ul",V,[(0,e._)("li",N,[this.subtotal?((0,e.wg)(),(0,e.iD)("div",S," 已套用優惠券 ")):(0,e.kq)("",!0),(0,e._)("div",P,[(0,e.wy)((0,e._)("input",{type:"text",class:"form-control",placeholder:"請輸入優惠券號碼","onUpdate:modelValue":s[5]||(s[5]=t=>st.coupon_code=t)},null,512),[[i.nr,st.coupon_code]]),(0,e._)("button",{class:"btn btn-outline-success",type:"button",onClick:s[6]||(s[6]=(...t)=>et.addCouponCode&&et.addCouponCode(...t))},["coupon"===st.status.loadingItem?((0,e.wg)(),(0,e.iD)("div",W)):((0,e.wg)(),(0,e.iD)("span",G,"使用"))])])]),(0,e._)("li",M,[H,(0,e._)("p",null,"共 "+(0,a.zw)(t.$filters.currency(et.qtyTotal))+" 樣",1)]),(0,e._)("li",Y,[E,(0,e._)("p",null,"NTD "+(0,a.zw)(t.$filters.currency(st.cart.total)),1)]),(0,e._)("li",K,[Z,(0,e._)("p",null,"NTD "+(0,a.zw)(t.$filters.currency(this.subtotal)),1)]),(0,e._)("li",R,[A,(0,e._)("p",null,"NTD "+(0,a.zw)(t.$filters.currency(st.cart.final_total)),1)])])])])]),(0,e._)("div",B,[(0,e._)("div",F,[(0,e._)("div",J,[(0,e.Wm)(at,{class:"btn btn-outline-secondary w-100",to:{path:"/user/productslist"}},{default:(0,e.w5)((()=>[O,Q])),_:1})]),(0,e._)("div",X,[(0,e._)("button",{class:"gocustomerinfo btn link-hover w-100",onClick:s[7]||(s[7]=(...t)=>et.checkout&&et.checkout(...t))},lt)])])])])):((0,e.wg)(),(0,e.iD)("div",n,[d,(0,e.Wm)(at,{to:{path:"/user/productslist"},class:"btn btn-primary btn-lg mb-5"},{default:(0,e.w5)((()=>[r,u])),_:1})]))])],64)}const it={class:"container bg-white mb-5 py-5 px-md-4"},at={class:"px-3 px-md-5"},ot={class:"table table-borderless pc-cart"},ct=(0,e._)("thead",{class:"rounded-3 cartThead"},[(0,e._)("tr",null,[(0,e._)("th",{scope:"col",width:"5%"},"編號"),(0,e._)("th",{scope:"col",width:"50%"},"商品名稱"),(0,e._)("th",{scope:"col",width:"10%"},"價格"),(0,e._)("th",{scope:"col",width:"10%"},"數量"),(0,e._)("th",{scope:"col",width:"10%"},"刪除")])],-1),nt={class:"cartTbody"},dt={class:"d-flex bd-highlight"},rt={class:"p-2 flex-shrink-1 bd-highlight"},ut=["src","alt"],pt={class:"p-2 w-100 bd-highlight"},ht={class:"m-0 fs-5"},mt={key:0,class:"d-flex justify-content-center"},bt=(0,e._)("div",{class:"spinner-border"},null,-1),_t=[bt],gt={key:1,class:"ms-3"},yt={class:"countNumber d-flex align-items-center"},wt=["onClick"],vt=(0,e._)("i",{class:"bi bi-dash"},null,-1),ft=[vt],kt=["onUpdate:modelValue","onChange"],Ct=["onClick"],xt=(0,e._)("i",{class:"bi bi-plus"},null,-1),qt=[xt],Dt={key:0,class:"spinner-border spinner-border-sm"},Ut=["onClick"],Lt={class:"table m-cart"},$t={class:"m-cartTbody"},It={width:"100%"},jt={class:"bd-highlight"},zt={class:"p-2"},Tt=["src","alt"],Vt={class:"p-2 bd-highlight"},Nt={class:"m-0 fs-5"},St={key:0,class:"d-flex justify-content-center"},Pt=(0,e._)("div",{class:"spinner-border"},null,-1),Wt=[Pt],Gt={key:1,class:"ms-5"},Mt={class:"countNumber d-flex align-items-center ms-4"},Ht=["onClick"],Yt=(0,e._)("i",{class:"bi bi-dash"},null,-1),Et=[Yt],Kt=["onUpdate:modelValue","onChange"],Zt=["onClick"],Rt=(0,e._)("i",{class:"bi bi-plus"},null,-1),At=[Rt],Bt={key:0,class:"spinner-border spinner-border-sm"},Ft=["onClick"];function Jt(t,s,l,o,c,n){const d=(0,e.up)("router-link");return(0,e.wg)(),(0,e.iD)("div",it,[(0,e._)("div",at,[(0,e._)("table",ot,[ct,(0,e._)("tbody",nt,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(l.cart.carts,((s,l)=>((0,e.wg)(),(0,e.iD)("tr",{key:s.id},[(0,e._)("td",null,(0,a.zw)(l+1),1),(0,e._)("td",null,[(0,e._)("div",dt,[(0,e._)("div",rt,[(0,e._)("img",{class:"cartImg",src:s.product.imageUrl,alt:s.product.title},null,8,ut)]),(0,e._)("div",pt,[(0,e._)("h4",ht,[(0,e.Wm)(d,{to:`/user/product/${s.product.id}`,class:"text-dark d-block"},{default:(0,e.w5)((()=>[(0,e.Uk)((0,a.zw)(s.product.title),1)])),_:2},1032,["to"])])])])]),(0,e._)("td",null,"NTD "+(0,a.zw)(t.$filters.currency(s.total)),1),(0,e._)("td",null,[c.status.loadingItem===s.product_id?((0,e.wg)(),(0,e.iD)("div",mt,_t)):((0,e.wg)(),(0,e.iD)("div",gt,[(0,e._)("div",yt,[(0,e._)("button",{class:"btn minus",onClick:t=>n.updateCart(s.id,s.product_id,s.qty-1)},ft,8,wt),(0,e.wy)((0,e._)("input",{class:"productNumber",type:"number",max:"10",min:"1","onUpdate:modelValue":t=>s.qty=t,onChange:t=>n.updateCart(s.id,s.product_id,s.qty)},null,40,kt),[[i.nr,s.qty,void 0,{number:!0}]]),(0,e._)("button",{class:"btn add",onClick:t=>n.updateCart(s.id,s.product_id,s.qty+1)},qt,8,Ct)])]))]),(0,e._)("td",null,[c.status.loadingItem===s.id?((0,e.wg)(),(0,e.iD)("div",Dt)):((0,e.wg)(),(0,e.iD)("button",{key:1,type:"button",class:"btn-close btn-outline-danger",onClick:t=>n.removeCartItem(s.id)},null,8,Ut))])])))),128))])]),(0,e._)("table",Lt,[(0,e._)("tbody",$t,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(l.cart.carts,((s,l)=>((0,e.wg)(),(0,e.iD)("tr",{key:s.id,class:"mt-5"},[(0,e._)("td",It,"編號"+(0,a.zw)(l+1),1),(0,e._)("td",null,[(0,e._)("div",jt,[(0,e._)("div",zt,[(0,e._)("img",{class:"m-cartImg",src:s.product.imageUrl,alt:s.product.title},null,8,Tt)]),(0,e._)("div",Vt,[(0,e._)("h4",Nt,[(0,e.Wm)(d,{to:`/user/product/${s.product.id}`,class:"text-dark d-block"},{default:(0,e.w5)((()=>[(0,e.Uk)((0,a.zw)(s.product.title),1)])),_:2},1032,["to"])])])])]),(0,e._)("td",null,"NTD "+(0,a.zw)(t.$filters.currency(s.total)),1),(0,e._)("td",null,[c.status.loadingItem===s.product_id?((0,e.wg)(),(0,e.iD)("div",St,Wt)):((0,e.wg)(),(0,e.iD)("div",Gt,[(0,e._)("div",Mt,[(0,e._)("button",{class:"btn minus ms-2",onClick:t=>n.updateCart(s.id,s.product_id,s.qty-1)},Et,8,Ht),(0,e.wy)((0,e._)("input",{class:"productNumber",type:"number",max:"10",min:"1","onUpdate:modelValue":t=>s.qty=t,onChange:t=>n.updateCart(s.id,s.product_id,s.qty)},null,40,Kt),[[i.nr,s.qty,void 0,{number:!0}]]),(0,e._)("button",{class:"btn add",onClick:t=>n.updateCart(s.id,s.product_id,s.qty+1)},At,8,Zt)])]))]),(0,e._)("td",null,[c.status.loadingItem===s.id?((0,e.wg)(),(0,e.iD)("div",Bt)):((0,e.wg)(),(0,e.iD)("button",{key:1,type:"button",class:"btn-close btn-outline-danger",onClick:t=>n.removeCartItem(s.id)},null,8,Ft))])])))),128))])])])])}var Ot={props:["cart","subtotal"],data(){return{status:{loadingItem:""}}},components:{},inject:["emitter","pushMessageState"],methods:{removeCartItem(t){this.status.loadingItem=t;const s=`https://vue3-course-api.hexschool.io/api/linbcshop-api/cart/${t}`;this.isLoading=!0,this.$http.delete(s).then((s=>{this.pushMessageState(s,"移除購物車品項"),this.status.loadingItem="",this.emitter.emit("update-cart",t),this.$parent.getCartProducts(),this.isLoading=!1}))},updateCart(t,s,l){const e=`https://vue3-course-api.hexschool.io/api/linbcshop-api/cart/${t}`;this.isLoading=!0;const i={product_id:s,qty:l};l<1?(i.qty=1,alert("數量不可低於1")):this.$http.put(e,{data:i}).then((t=>{this.pushMessageState(t,"數量更改"),this.$parent.getCartProducts(),this.isLoading=!1}))}},created(){}},Qt=l(89);const Xt=(0,Qt.Z)(Ot,[["render",Jt]]);var ts=Xt,ss={data(){return{products:[],cart:{},hotProducts:[],qtyList:[],pay:[],shipping:[],final_total:"",coupon_code:"",subtotal:"",isLoading:!1,status:{loadingItem:""}}},components:{Cart:ts},inject:["emitter","pushMessageState"],methods:{getCartProducts(){const t="https://vue3-course-api.hexschool.io/api/linbcshop-api/cart";this.isLoading=!0,this.$http.get(t).then((t=>{this.cart=t.data.data,this.subtotal=this.cart.total-this.cart.final_total,this.getqtyList(),this.isLoading=!1}))},getqtyList(){this.qtyList.length=0,this.cart.carts.filter((t=>(this.qtyList.push(t.qty),this.qtyList)))},addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/linbcshop-api/coupon",s={code:this.coupon_code};this.isLoading=!0,this.$http.post(t,{data:s}).then((t=>{this.pushMessageState(t,"優惠卷使用"),this.isLoading=!1,this.coupon_code=s.code,this.getCartProducts()}))},checkout(){const t=this.pay,s=this.shipping;0===t.length?alert("未選擇付款方式"):0===s.length?alert("未選擇收貨方式"):this.$router.push({path:"/cart/customerinfo",query:{pays:t,shippings:s}})}},computed:{qtyTotal(){let t=0;return this.qtyList.forEach((s=>{t+=s})),t}},created(){this.getCartProducts()}};const ls=(0,Qt.Z)(ss,[["render",et]]);var es=ls}}]);
//# sourceMappingURL=674.1dae100b.js.map